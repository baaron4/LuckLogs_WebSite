<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - LuckLogs</title>

    
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/favicon.ico'" />
   
    <environment names="Development">
        <script src="~/Content/js/jquery.js"></script>
        <script src="~/Content/js/bootstrap.js"></script>
        <script src="~/Content/js/site.js" asp-append-version="true"></script>
    </environment>
    <environment names="Staging,Production">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"
                asp-fallback-src="~/Content/js/jquery.min.js"
                asp-fallback-test="window.jQuery"
                crossorigin="anonymous"
                integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
        </script>
        <script>
            $(
                function () {
                    $('[data-toggle="tooltip"]').tooltip();
                    html: true
                })
        </script>
       
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js"
                asp-fallback-src="~/Content/js/bootstrap.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                crossorigin="anonymous"
                integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
        </script>
       
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css">
        <script src="~/Scripts/jquery.filedrop.js" type="text/javascript"></script>
    </environment>
    <link href="~/Content/css/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/css/site.css" />
    @*<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">*@
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="https://cdn.plot.ly/plotly-1.2.0.min.js"></script>
    <script src="~/Scripts/moment.js"></script>
    <script src="~/Scripts/moment.min.js"></script>
    <script> $(function () {
     $('#myTable').DataTable({
         "order": [[1, "desc"]],
         paging: false,
         
     });
        })</script>
    

    @RenderSection("Scripts", required: false)
    <style>
        #image-map {
            width: 100%;
            height: 300px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }
    </style>
    
</head>
<body>
@model LuckLogsApp.Models.ViewModel
    @{  if (Session["PatchStart"] == null) { Session["PatchStart"] = 0; Session["PatchName"] = "All Patches"; }
        if (Session["PatchEnd"] == null) { Session["PatchEnd"] = 0; }
        if (Session["TimeSpan"] ==null) { Session["TimeSpan"] = 0; Session["TimeSpanName"] = "All Time"; }   }
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            @Html.ActionLink("LuckLogs", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="#" data-toggle="modal" data-target="#myModal">Logs</a></li>
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Rankings<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li>@Html.ActionLink("Vale Guardian", "Rankings", "Home", new { boss = "Vale Guardian" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Gorseval", "Rankings", "Home", new { boss = "Gorseval the Multifarious" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Sabetha", "Rankings", "Home", new { boss = "Sabetha the Saboteur"}, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Slothasor", "Rankings", "Home", new { boss = "Slothasor" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Matthias", "Rankings", "Home", new { boss = "Matthias Gabrel"}, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Keep Construct", "Rankings", "Home", new { boss = "Keep Construct" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Xera", "Rankings", "Home", new { boss = "Xera"}, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Cairn", "Rankings", "Home", new { boss = "Cairn the Indomitable" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Overseer", "Rankings", "Home", new { boss = "Mursaat Overseer" }, new { hidefocus = "hidefocus" })</li>

                        <li>@Html.ActionLink("Samarog", "Rankings", "Home", new { boss = "Samarog" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Deimos", "Rankings", "Home", new { boss = "Deimos" }, new { hidefocus = "hidefocus" })</li>
                    </ul>
                </li>
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Statistics<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li>@Html.ActionLink("Vale Guardian", "Statistics", "Home", new { boss = "Vale Guardian" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Gorseval", "Statistics", "Home", new { boss = "Gorseval the Multifarious" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Sabetha", "Statistics", "Home", new { boss = "Sabetha the Saboteur" }, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Slothasor", "Statistics", "Home", new { boss = "Slothasor" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Matthias", "Statistics", "Home", new { boss = "Matthias Gabrel" }, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Keep Construct", "Statistics", "Home", new { boss = "Keep Construct" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Xera", "Statistics", "Home", new { boss = "Xera" }, new { hidefocus = "hidefocus" })</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Cairn", "Statistics", "Home", new { boss = "Cairn the Indomitable" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Overseer", "Statistics", "Home", new { boss = "Mursaat Overseer" }, new { hidefocus = "hidefocus" })</li>

                        <li>@Html.ActionLink("Samarog", "Statistics", "Home", new { boss = "Samarog" }, new { hidefocus = "hidefocus" })</li>
                        <li>@Html.ActionLink("Deimos", "Statistics", "Home", new { boss = "Deimos" }, new { hidefocus = "hidefocus" })</li>
                    </ul>
                </li>
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Performance<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        @*<li><a href="#">Build Performance</a></li>*@
                        <li>@Html.ActionLink("Player Performance", "PlayerTable", "Home")</li>
                        <li>@Html.ActionLink("Group Performance", "GroupPerformance", "Home", new { groupid = "1" }, new { hidefocus = "hidefocus" })</li>
                    </ul>
            </ul>
            <!--<form class="navbar-form navbar-right">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search">
                    <div class="input-group-btn">
                        <button class="btn btn-default " type="submit">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                    </div>
                </div>
            </form>-->
            <ul class="nav navbar-nav navbar-right">

                <!--<li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>-->

                <li>@Html.ActionLink("Log Upload Page", "Index", "RaidLogs") </li>
            </ul>
        </div>
    </div>
</nav>
    
    <nav class="navbar navbar-default " style="margin-bottom: 0px !important;">
        <div class="container-fluid">
            <ul class="nav navbar-nav">
                
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Game Patch: @Session["PatchName"]<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart = 0,patchEnd= 0,  timeSpan= Session["TimeSpan"],patchName = "All Patches",timeSpanName = Session["TimeSpanName"]})">All Patches</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart = 20171017,patchEnd= 0,  timeSpan= Session["TimeSpan"],patchName = "October 17, 2017", timeSpanName = Session["TimeSpanName"] ,groupName = Session["GroupName"],groupID = Session["GroupID"]})">October 17, 2017(Scourge Shade Fix)</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart = 20170922,patchEnd= 20171017,  timeSpan= Session["TimeSpan"],patchName = "September 22, 2017", timeSpanName = Session["TimeSpanName"] ,groupName = Session["GroupName"],groupID = Session["GroupID"]})">September 22, 2017(PoF Release)</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart = 20170808,patchEnd= 20170922,  timeSpan= Session["TimeSpan"],patchName = "August 8, 2017", timeSpanName = Session["TimeSpanName"] ,groupName = Session["GroupName"],groupID = Session["GroupID"]})">August 8, 2017(Pre PoF Balance)</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart = 20170516,patchEnd= 20170808,  timeSpan= Session["TimeSpan"],patchName = "May 16, 2017", timeSpanName = Session["TimeSpanName"],groupName = Session["GroupName"],groupID = Session["GroupID"] })">May 16, 2017(SwS Nerf)</a></li>
                    </ul>
                </li>
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Time Span: @Session["TimeSpanName"]<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= 0,patchName = Session["PatchName"],timeSpanName ="All Time",groupName = Session["GroupName"],groupID = Session["GroupID"]})">All Time</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= 2,patchName = Session["PatchName"],timeSpanName ="2 Weeks",groupName = Session["GroupName"],groupID = Session["GroupID"]})">2 Weeks</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= 4,patchName = Session["PatchName"],timeSpanName ="1 Month",groupName = Session["GroupName"],groupID = Session["GroupID"]})">1 Month</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= 12,patchName = Session["PatchName"],timeSpanName ="3 Months",groupName = Session["GroupName"],groupID = Session["GroupID"]})">3 Months</a></li>
                    </ul>
                </li>
                <li class="dropdown closed">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Group: @Session["GroupName"]<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= Session["TimeSpan"],patchName = Session["PatchName"],timeSpanName = Session["TimeSpanName"],groupName = "All Groups",groupID = 0})">All Groups</a></li>
                        <li><a href="@Url.Action("SetPatch","Home",new { patchStart =  Session["PatchStart"],patchEnd=  Session["PatchEnd"],  timeSpan= Session["TimeSpan"],patchName = Session["PatchName"],timeSpanName = Session["TimeSpanName"],groupName = "LUCK",groupID = 1})">LUCK</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

<!-- Log Modal -->
<div class="modal left fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Logs</h4>
            </div>

            <div class="modal-body">
                <form class="form-inline">
                    <select class="form-control" id="BNamesSelector" onchange="filterTable()">
                        <option value="">All Bosses</option>
                        <option value="Vale Guardian">Vale Guardian</option>
                        <option value="Gorseval the Multifarious">Gorseval</option>
                        <option value="Sabetha the Saboteur">Sabetha</option>
                        <option value="Slothasor">Slothasor</option>
                        <option value="Matthias Gabrel">Matthias</option>
                        <option value="Keep Construct">Keep Construct</option>
                        <option value="Xera">Xera</option>
                        <option value="Cairn the Indomitable">Cairn</option>
                        <option value="Mursaat Overseer">Mursaat Overseer</option>
                        <option value="Samarog">Samarog</option>
                        <option value="Deimos">Deimos</option>
                    </select>
                    <input type="week" id="WeekSelector" onchange="filterTable()"><br />
                </form>

                <table class="table table-striped table-hover " id="myTable">
                    <thead>
                        <tr>
                            <th>
                                <a href="#">Boss<span class="glyphicon glyphicon-sort"></span></a>
                            </th>
                            <th>
                                <a href="#"> Date<span class="glyphicon glyphicon-sort"></span></a>
                            </th>
                            <th>
                                <a href="#"> Time<span class="glyphicon glyphicon-sort"></span></a>
                            </th>
                            <th>
                                Link
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.DbList)
                        {
                            <tr data-toggle="tooltip" data-html="true" data-placement="right" title="@Html.DisplayFor(modelItem => item.CompTable)">

                                <td>
                                    @if (item.Sucess)
                                    {
                                        <p class="text-success">  @Html.DisplayFor(modelItem => item.BossName)</p>
                                    }
                                    else
                                    {
                                        <p class="text-warning">  @Html.DisplayFor(modelItem => item.BossName)</p>
                                    }
                                </td>
                                <td>
                                    @{string fileString = "";
                                        string dateString = "";
                                        if (item.EVTCFile != null)
                                        {
                                            fileString = Html.DisplayFor(modelItem => item.EVTCFile).ToString();//Create Date from evtc file name
                                            dateString = fileString.Substring(fileString.Length - 20, 15);
                                        }
                                        else if (item.HtmlFile != null)
                                        {
                                            fileString = Html.DisplayFor(modelItem => item.HtmlFile).ToString();//Create Date from evtc file name
                                            dateString = fileString.Substring(51, 15);
                                        }

                                        string Y = dateString.Substring(0, 4);
                                        string M = dateString.Substring(4, 2);
                                        string D = dateString.Substring(6, 2);
                                        string H = dateString.Substring(9, 2);
                                        string mn = dateString.Substring(11, 2);
                                        string s = dateString.Substring(13, 2);
                                        string dispDate = Y + "-" + M + "-" + D + "  " + H + ":" + mn;
                                        <p>@dispDate</p>

                                    }
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.KillTime)
                                </td>
                                <td>
                                    <a href="@Url.Action("Logs", "Home", new { id = item.ID})" class="btn btn-success btn-sm">Open</a>


                                </td>

                            </tr>
                                        }
                    </tbody>
                </table>
            </div>

        </div><!-- modal-content -->
    </div><!-- modal-dialog -->
</div><!-- modal -->
<!-- Stat Modal -->
@*<div class="modal right fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel2">Right Sidebar</h4>
                </div>

                <div class="modal-body">
                    <p>
                        Work in Progress
                    </p>
                </div>

            </div><!-- modal-content -->
        </div><!-- modal-dialog -->
    </div><!-- modal -->*@





    
    <div class="bg">
        <div class="container body-content">
            @*@Html.Partial( "~/Views/Shared/_PatchSelect.cshtml")*@
            @RenderBody()
           
            <hr />
            <footer>
                <p>&copy; 2017 - LuckLogsWebApp, Created by <a href="https://www.reddit.com/user/Baaron4/">/u/Baaron4</a> or baaron.6745 |
                <br /> © 2010–2017 ArenaNet, LLC. All rights reserved. Guild Wars, Guild Wars 2, Guild Wars 2: Heart of Thorns, ArenaNet, NCSOFT, the Interlocking NC Logo, and all associated logos and designs are trademarks or registered trademarks of NCSOFT Corporation. All other trademarks are the property of their respective owners.
                </p>
            </footer>
        </div>
    </div>
   
</body>
</html>
